<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 4 Como trabalhar no R | R Zero - do simples ao complexo</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 4 Como trabalhar no R | R Zero - do simples ao complexo" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="https://github.com/DiogoJackson/Livro_R_Zero" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 4 Como trabalhar no R | R Zero - do simples ao complexo" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="Diogo J. A. Silva" />


<meta name="date" content="2024-02-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-para-iniciantes.html"/>
<link rel="next" href="git-e-github.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Bem-vindos</a></li>
<li class="chapter" data-level="2" data-path="pré-requisitos.html"><a href="pré-requisitos.html"><i class="fa fa-check"></i><b>2</b> Pré-requisitos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="pré-requisitos.html"><a href="pré-requisitos.html#instalando-r-e-rstudio"><i class="fa fa-check"></i><b>2.1</b> Instalando R e RStudio</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html"><i class="fa fa-check"></i><b>3</b> R para iniciantes</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#entendendo-o-rstudio"><i class="fa fa-check"></i><b>3.1</b> Entendendo o RStudio</a></li>
<li class="chapter" data-level="3.2" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#objetos-vetores-e-funções"><i class="fa fa-check"></i><b>3.2</b> Objetos, vetores e funções</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#objetos"><i class="fa fa-check"></i><b>3.2.1</b> Objetos</a></li>
<li class="chapter" data-level="3.2.2" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#vetores"><i class="fa fa-check"></i><b>3.2.2</b> Vetores</a></li>
<li class="chapter" data-level="3.2.3" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#funções"><i class="fa fa-check"></i><b>3.2.3</b> Funções</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#tabela-de-dados"><i class="fa fa-check"></i><b>3.3</b> Tabela de dados</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#data-frame"><i class="fa fa-check"></i><b>3.3.1</b> Data frame</a></li>
<li class="chapter" data-level="3.3.2" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#planilha-de-dados-nativa-do-r"><i class="fa fa-check"></i><b>3.3.2</b> Planilha de dados nativa do R</a></li>
<li class="chapter" data-level="3.3.3" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#importando-sua-planilha"><i class="fa fa-check"></i><b>3.3.3</b> Importando sua planilha</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#graficos"><i class="fa fa-check"></i><b>3.4</b> Graficos</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#grafico-de-histograma"><i class="fa fa-check"></i><b>3.4.1</b> Grafico de histograma</a></li>
<li class="chapter" data-level="3.4.2" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#grafico-de-dispersao"><i class="fa fa-check"></i><b>3.4.2</b> Grafico de dispersao</a></li>
<li class="chapter" data-level="3.4.3" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#grafico-boxplot"><i class="fa fa-check"></i><b>3.4.3</b> Grafico boxplot</a></li>
<li class="chapter" data-level="3.4.4" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#grafico-de-barras"><i class="fa fa-check"></i><b>3.4.4</b> Grafico de barras</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="r-para-iniciantes.html"><a href="r-para-iniciantes.html#pacotes"><i class="fa fa-check"></i><b>3.5</b> Pacotes</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="como-trabalhar-no-r.html"><a href="como-trabalhar-no-r.html"><i class="fa fa-check"></i><b>4</b> Como trabalhar no R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="como-trabalhar-no-r.html"><a href="como-trabalhar-no-r.html#criando-um-projeto-de-r"><i class="fa fa-check"></i><b>4.1</b> Criando um projeto de R</a></li>
<li class="chapter" data-level="4.2" data-path="como-trabalhar-no-r.html"><a href="como-trabalhar-no-r.html#organizando-o-projeto-de-r"><i class="fa fa-check"></i><b>4.2</b> Organizando o projeto de R</a></li>
<li class="chapter" data-level="4.3" data-path="como-trabalhar-no-r.html"><a href="como-trabalhar-no-r.html#trabalhando-em-um-projeto-de-r"><i class="fa fa-check"></i><b>4.3</b> Trabalhando em um projeto de R</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="como-trabalhar-no-r.html"><a href="como-trabalhar-no-r.html#etapa-1-limpar-dados"><i class="fa fa-check"></i><b>4.3.1</b> Etapa 1: limpar dados</a></li>
<li class="chapter" data-level="4.3.2" data-path="como-trabalhar-no-r.html"><a href="como-trabalhar-no-r.html#etapa-2-fazer-analise"><i class="fa fa-check"></i><b>4.3.2</b> Etapa 2: fazer analise</a></li>
<li class="chapter" data-level="4.3.3" data-path="como-trabalhar-no-r.html"><a href="como-trabalhar-no-r.html#etapa-3-criar-grafico"><i class="fa fa-check"></i><b>4.3.3</b> Etapa 3: criar grafico</a></li>
<li class="chapter" data-level="4.3.4" data-path="como-trabalhar-no-r.html"><a href="como-trabalhar-no-r.html#etapa-4-replicabilidade"><i class="fa fa-check"></i><b>4.3.4</b> Etapa 4: Replicabilidade</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="git-e-github.html"><a href="git-e-github.html"><i class="fa fa-check"></i><b>5</b> Git e GitHub</a></li>
<li class="chapter" data-level="6" data-path="funcoes-avancadas.html"><a href="funcoes-avancadas.html"><i class="fa fa-check"></i><b>6</b> Funcoes avancadas</a>
<ul>
<li class="chapter" data-level="6.1" data-path="funcoes-avancadas.html"><a href="funcoes-avancadas.html#ifelse"><i class="fa fa-check"></i><b>6.1</b> ifelse ()</a></li>
<li class="chapter" data-level="6.2" data-path="funcoes-avancadas.html"><a href="funcoes-avancadas.html#for"><i class="fa fa-check"></i><b>6.2</b> for()</a></li>
<li class="chapter" data-level="6.3" data-path="funcoes-avancadas.html"><a href="funcoes-avancadas.html#while"><i class="fa fa-check"></i><b>6.3</b> while()</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="criando-funcoes.html"><a href="criando-funcoes.html"><i class="fa fa-check"></i><b>7</b> Criando funcoes</a>
<ul>
<li class="chapter" data-level="7.1" data-path="criando-funcoes.html"><a href="criando-funcoes.html#estrutura-de-uma-função"><i class="fa fa-check"></i><b>7.1</b> Estrutura de uma função</a></li>
<li class="chapter" data-level="7.2" data-path="criando-funcoes.html"><a href="criando-funcoes.html#criando-uma-funcao-simples"><i class="fa fa-check"></i><b>7.2</b> Criando uma funcao simples</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="criando-pacotes.html"><a href="criando-pacotes.html"><i class="fa fa-check"></i><b>8</b> Criando pacotes</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Zero - do simples ao complexo</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="como-trabalhar-no-r" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Capítulo 4</span> Como trabalhar no R<a href="como-trabalhar-no-r.html#como-trabalhar-no-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Se você já tem uma noção de R, mas ainda sente dificuldade em organizar seu fluxo de trabalho, este capítulo é para você! Utilizaremos técnicas de ciência de dados e repositórios como o GitHub para tornar o trabalho no R prazeroso e eficiente!</p>
<p>Iremos utilizar o banco de dados ficticios que possui erros comuns que podemos utilizar para aprender a lidar com eles sem precisar de utilizar o Excel.</p>
<p>Baixe a planilha fake e veja que ela possui quatro variaveis (ID, peso, numero de parasitas e local) coletadas do passarinho bem-te-vi.</p>
<p><a href="data/fake_data.xlsx">Clique aqui para baixar a planilha ficticia</a></p>
<p>Vamos importar a planilha fictícia mais para frente. Relaxe aí e finja que ela é sua.</p>
<div id="criando-um-projeto-de-r" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Criando um projeto de R<a href="como-trabalhar-no-r.html#criando-um-projeto-de-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Imaginemos que precisamos analisar um banco de dados de algum projeto. O primeiro passo eh criar um projeto de R, para isso voce vai no canto superior direito do RStudio (proximo a janela de environment e history) e clica:</p>
<p><strong>project (none)” &gt; new project &gt; new directory &gt; new project</strong></p>
<p>Ao clicar em “New Project”, aparecerá uma janela para escolher o nome do projeto e o local no computador onde seu projeto irá ficar. Coloque o nome desejado (sugestão: “projeto_caranguejo”), selecione qualquer pasta no computador (sugestão: desktop) e clique em “Criar Projeto”.</p>
<p>Se você fez tudo direitinho, o RStudio estará da seguinte forma. Note que ao invés de “Project (None)”, estará o nome do projeto que você criou.</p>
<p><img src="img/tela_do_projeto.png" /></p>
<p>Sugiro, meu nobre consagrado Rzeiro, que você vá no local do computador onde você criou o projeto e veja a pasta, veja o arquivo de R que foi criado. Você também pode fazer isso utilizando a janela de “Files”, onde mostrará todas as pastas do seu diretório que, a partir de agora, será a pasta que o seu arquivo de projeto de R está situado. Todos os scripts, arquivos e planilhas que você irá utilizar nas suas análises, ficarão dentro da pasta do projeto. Isso significa que vai ficar tudo solto, bagunçado? Claro que não. Iremos criar pastas organizadas onde hospedarão cada coisa que iremos trabalhar, como por exemplo: dados brutos, dados processados, scripts, outputs, etc. Você pode criar manualmente, mas por que faríamos isso se temos o R para fazer por nós?</p>
</div>
<div id="organizando-o-projeto-de-r" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Organizando o projeto de R<a href="como-trabalhar-no-r.html#organizando-o-projeto-de-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Para criar as pastas de forma organizada, voce pode fazer manualmente ou utilizando o pacote “here”.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="como-trabalhar-no-r.html#cb45-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;here&quot;</span>)</span>
<span id="cb45-2"><a href="como-trabalhar-no-r.html#cb45-2" tabindex="-1"></a><span class="fu">library</span>(here)</span></code></pre></div>
<p>Após a instalação do pacote “here”, iremos criar uma função que criará as pastas automaticamente no nosso diretório. Não se assuste com o script da função, ela é mais simples do que parece e você não precisa entendê-lo por completo. Apenas rode o código para criar a função e depois rode o código que utiliza a função para criar as pastas.</p>
<p>Antes de rodar o código, certifique-se de que você está no projeto de R que você criou.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="como-trabalhar-no-r.html#cb46-1" tabindex="-1"></a><span class="co"># Criando funcao para criacao das pastas do projeto</span></span>
<span id="cb46-2"><a href="como-trabalhar-no-r.html#cb46-2" tabindex="-1"></a><span class="co"># Codigo disponibilizado pelo Gustavo Paterno (https://github.com/paternogbc)</span></span>
<span id="cb46-3"><a href="como-trabalhar-no-r.html#cb46-3" tabindex="-1"></a></span>
<span id="cb46-4"><a href="como-trabalhar-no-r.html#cb46-4" tabindex="-1"></a>build_project <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">type =</span> <span class="st">&quot;analysis&quot;</span>,</span>
<span id="cb46-5"><a href="como-trabalhar-no-r.html#cb46-5" tabindex="-1"></a>                          <span class="at">temp =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb46-6"><a href="como-trabalhar-no-r.html#cb46-6" tabindex="-1"></a>  </span>
<span id="cb46-7"><a href="como-trabalhar-no-r.html#cb46-7" tabindex="-1"></a>  <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">&quot;analysis&quot;</span>){</span>
<span id="cb46-8"><a href="como-trabalhar-no-r.html#cb46-8" tabindex="-1"></a>    <span class="co"># Data</span></span>
<span id="cb46-9"><a href="como-trabalhar-no-r.html#cb46-9" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="at">path =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>))</span>
<span id="cb46-10"><a href="como-trabalhar-no-r.html#cb46-10" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="at">path =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;raw&quot;</span>))</span>
<span id="cb46-11"><a href="como-trabalhar-no-r.html#cb46-11" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="at">path =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;processed&quot;</span>))</span>
<span id="cb46-12"><a href="como-trabalhar-no-r.html#cb46-12" tabindex="-1"></a>    </span>
<span id="cb46-13"><a href="como-trabalhar-no-r.html#cb46-13" tabindex="-1"></a>    <span class="co"># outputs</span></span>
<span id="cb46-14"><a href="como-trabalhar-no-r.html#cb46-14" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="at">path =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;outputs&quot;</span>))</span>
<span id="cb46-15"><a href="como-trabalhar-no-r.html#cb46-15" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="at">path =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;outputs&quot;</span>, <span class="st">&quot;figures&quot;</span>))</span>
<span id="cb46-16"><a href="como-trabalhar-no-r.html#cb46-16" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="at">path =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;outputs&quot;</span>, <span class="st">&quot;tables&quot;</span>))</span>
<span id="cb46-17"><a href="como-trabalhar-no-r.html#cb46-17" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">isTRUE</span>(temp)){</span>
<span id="cb46-18"><a href="como-trabalhar-no-r.html#cb46-18" tabindex="-1"></a>      <span class="fu">dir.create</span>(<span class="at">path =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;outputs&quot;</span>, <span class="st">&quot;temp&quot;</span>))</span>
<span id="cb46-19"><a href="como-trabalhar-no-r.html#cb46-19" tabindex="-1"></a>    }</span>
<span id="cb46-20"><a href="como-trabalhar-no-r.html#cb46-20" tabindex="-1"></a>    </span>
<span id="cb46-21"><a href="como-trabalhar-no-r.html#cb46-21" tabindex="-1"></a>    <span class="co"># scripts</span></span>
<span id="cb46-22"><a href="como-trabalhar-no-r.html#cb46-22" tabindex="-1"></a>    <span class="fu">dir.create</span>(<span class="at">path =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;scripts&quot;</span>))</span>
<span id="cb46-23"><a href="como-trabalhar-no-r.html#cb46-23" tabindex="-1"></a>    </span>
<span id="cb46-24"><a href="como-trabalhar-no-r.html#cb46-24" tabindex="-1"></a>    <span class="co"># docs</span></span>
<span id="cb46-25"><a href="como-trabalhar-no-r.html#cb46-25" tabindex="-1"></a>    <span class="co">#dir.create(path = here::here(&quot;docs&quot;)) #para criar a pasta docs, so tirar o comentario dessa linha</span></span>
<span id="cb46-26"><a href="como-trabalhar-no-r.html#cb46-26" tabindex="-1"></a>  }</span>
<span id="cb46-27"><a href="como-trabalhar-no-r.html#cb46-27" tabindex="-1"></a>}</span>
<span id="cb46-28"><a href="como-trabalhar-no-r.html#cb46-28" tabindex="-1"></a></span>
<span id="cb46-29"><a href="como-trabalhar-no-r.html#cb46-29" tabindex="-1"></a><span class="co">#Utilizando a funcao criada para gerar as pastas</span></span>
<span id="cb46-30"><a href="como-trabalhar-no-r.html#cb46-30" tabindex="-1"></a><span class="fu">build_project</span>(<span class="at">type =</span> <span class="st">&quot;analysis&quot;</span>,</span>
<span id="cb46-31"><a href="como-trabalhar-no-r.html#cb46-31" tabindex="-1"></a>              <span class="at">temp =</span> <span class="cn">TRUE</span>) <span class="co">#se FALSE, nao cria a pasta temp.</span></span></code></pre></div>
<p>Se tudo ocorreu bem, as pastas estao assim:</p>
<p><img src="img/pastas_do_projeto.png" /></p>
<p>Dentro da pasta “data”, você encontra as subpastas “raw” e “processed”. Em “outputs”, você encontra as subpastas “figures”, “temp” e “tables”. Em “script”, você não encontrará nada (por enquanto). O arquivo com o símbolo do R “projeto_caranguejos.Rproj” é o seu projeto de R. Você pode abri-lo (dando duplo clique) toda vez que você for trabalhar no projeto. Isso abrirá o RStudio já com o seu projeto aberto e pronto para trabalhar.</p>
<ul>
<li>Feche o RStudio e abra-o novamente dando clique duplo no seu projeto de R.</li>
</ul>
<p>Agora você tem tudo pronto para começar a trabalhar com um fluxo de trabalho eficiente e reprodutível!</p>
</div>
<div id="trabalhando-em-um-projeto-de-r" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Trabalhando em um projeto de R<a href="como-trabalhar-no-r.html#trabalhando-em-um-projeto-de-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Antes de tudo baixe a planilha de dados ficticios (caso nao tenha baixado ainda) de uma especie de passarinho (tambem ficticia), que contem informacoes ficticias sobre peso (g) e quantidade de parasitas de tres diferentes localidades do bem-te-vi:</p>
<p><a href="data/fake_data.xlsx">Clique aqui para baixar a planilha ficticia</a></p>
<p>Na pasta <strong>data &gt; raw</strong>, você adiciona sua planilha de dados brutos fictícia (fake_data.xlsx). O fluxo de trabalho será o mais simples possível, mas envolverá etapas essenciais da análise de dados.</p>
<p><strong>Limpar dados brutos &gt; Realizar análise &gt; Mostrar gráficos</strong></p>
<p>Para limpar a planilha de dados brutos, iremos criar um script para isso. Utilizaremos funções do pacote <em>dplyr</em> para modificar nomes das variáveis, nomes dos fatores, analisar dados faltantes, entre outras coisas.</p>
<div id="etapa-1-limpar-dados" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Etapa 1: limpar dados<a href="como-trabalhar-no-r.html#etapa-1-limpar-dados" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Vamos criar um script para limpar nossos dados brutos. Monte o script completo utilizando os codigos que irei fornecendo a seguir copiando e colando no seu RStudio. Assim, a primeira coisa que iremos fazer do script eh seu cabecalho. Utilizaremos os comentarios para criar um cabecalho com as informacoes de titulo, autores e data.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="como-trabalhar-no-r.html#cb47-1" tabindex="-1"></a></span>
<span id="cb47-2"><a href="como-trabalhar-no-r.html#cb47-2" tabindex="-1"></a><span class="co"># Script to load and clean raw data flores iris</span></span>
<span id="cb47-3"><a href="como-trabalhar-no-r.html#cb47-3" tabindex="-1"></a><span class="co"># Author: Marilia T. Ericcson</span></span>
<span id="cb47-4"><a href="como-trabalhar-no-r.html#cb47-4" tabindex="-1"></a><span class="co"># Data: 2019-11-06</span></span></code></pre></div>
<p>Após isso, utilizaremos os comentários para organizar o script em tópicos, fazendo isso manualmente ou utilizando o atalho: <strong>Ctrl + Shift + R</strong>. A primeira parte do código é a instalação dos pacotes que iremos utilizar no processo.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="como-trabalhar-no-r.html#cb48-1" tabindex="-1"></a></span>
<span id="cb48-2"><a href="como-trabalhar-no-r.html#cb48-2" tabindex="-1"></a><span class="co"># Packages -------------------------------------------------------------</span></span>
<span id="cb48-3"><a href="como-trabalhar-no-r.html#cb48-3" tabindex="-1"></a><span class="co"># Caso nao tenha os pacotes instalados, instale!</span></span>
<span id="cb48-4"><a href="como-trabalhar-no-r.html#cb48-4" tabindex="-1"></a></span>
<span id="cb48-5"><a href="como-trabalhar-no-r.html#cb48-5" tabindex="-1"></a><span class="fu">library</span>(dplyr)  <span class="co">#Pacote com funcoes para manipular dados</span></span>
<span id="cb48-6"><a href="como-trabalhar-no-r.html#cb48-6" tabindex="-1"></a><span class="fu">library</span>(readxl) <span class="co">#Pacote com funcao para importar planilha em formato de excel (xlsx)</span></span></code></pre></div>
<p>Segundo, importamos o banco de dados a ser processado (limpado) utilizando a função <em>read.csv()</em> e atribuindo (&lt;-) a um objeto que iremos chamar de “dados”. Para importar, você só precisa especificar o caminho do diretório em que o arquivo está inserido. Como estamos utilizando o projeto de R, o diretório é onde o projeto está. Dessa forma, não há necessidade de dizer para o R qual é o seu diretório de trabalho. Logo, fica fácil importar os dados brutos pois sabemos que ele está na pasta “dados &gt; raw &gt; iris.csv”. Dizemos isso para o R utilizando os nomes das pastas separados por barras e, por fim, o nome do arquivo (iris) e sua extensão (.csv).</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="como-trabalhar-no-r.html#cb49-1" tabindex="-1"></a></span>
<span id="cb49-2"><a href="como-trabalhar-no-r.html#cb49-2" tabindex="-1"></a><span class="co"># Load data ---------------------------------------------------------------</span></span>
<span id="cb49-3"><a href="como-trabalhar-no-r.html#cb49-3" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/raw/fake_data.xlsx&quot;</span>)</span></code></pre></div>
<p>Agora que o banco de dados foi importado, podemos fazer um check up basico utilizando algumas funcoes. Como assim check up basico? Ver o numero de observacoes, se tem dado faltando ou observacao duplicada, essas coisas.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="como-trabalhar-no-r.html#cb50-1" tabindex="-1"></a></span>
<span id="cb50-2"><a href="como-trabalhar-no-r.html#cb50-2" tabindex="-1"></a><span class="co"># 1. Check up basico --------------------------------------------------------------</span></span>
<span id="cb50-3"><a href="como-trabalhar-no-r.html#cb50-3" tabindex="-1"></a><span class="fu">nrow</span>(dados)             <span class="co"># Quantas linhas (observacoes) tem no banco de dados?</span></span>
<span id="cb50-4"><a href="como-trabalhar-no-r.html#cb50-4" tabindex="-1"></a><span class="fu">str</span>(dados)              <span class="co"># quais as classes das variaveis?</span></span>
<span id="cb50-5"><a href="como-trabalhar-no-r.html#cb50-5" tabindex="-1"></a><span class="fu">attributes</span>(dados)       <span class="co"># quais atributos?</span></span>
<span id="cb50-6"><a href="como-trabalhar-no-r.html#cb50-6" tabindex="-1"></a><span class="fu">head</span>(dados)             <span class="co"># Primeiras linhas do banco de dados.</span></span>
<span id="cb50-7"><a href="como-trabalhar-no-r.html#cb50-7" tabindex="-1"></a><span class="fu">any</span>(<span class="fu">duplicated</span>(dados))  <span class="co"># Checar se tem linhas duplicadas.</span></span>
<span id="cb50-8"><a href="como-trabalhar-no-r.html#cb50-8" tabindex="-1"></a><span class="fu">any</span>(<span class="fu">is.na</span>(dados))       <span class="co"># Checar se tem dado faltando (NA).</span></span></code></pre></div>
<p>Às vezes, os nomes das variáveis não são fáceis de trabalhar, possuindo espaços, acentos, letras maiúsculas e minúsculas, e nomes confusos. Além de complicar o código, o nome de algumas variáveis pode bugá-lo (caso das acentuações de palavras em português). Então, vamos mudar o nome das variáveis utilizando a função <em>rename()</em> do pacote <strong>dplyr</strong>. Iremos deixar os nomes mais fáceis de trabalhar, deixando todas as letras minúsculas.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="como-trabalhar-no-r.html#cb51-1" tabindex="-1"></a></span>
<span id="cb51-2"><a href="como-trabalhar-no-r.html#cb51-2" tabindex="-1"></a><span class="co"># 3. Renomeando o nome das variaveis -------------------------------------------------------</span></span>
<span id="cb51-3"><a href="como-trabalhar-no-r.html#cb51-3" tabindex="-1"></a><span class="co">#ver nome das colunas (variaveis) ----</span></span>
<span id="cb51-4"><a href="como-trabalhar-no-r.html#cb51-4" tabindex="-1"></a><span class="fu">colnames</span>(dados)</span>
<span id="cb51-5"><a href="como-trabalhar-no-r.html#cb51-5" tabindex="-1"></a></span>
<span id="cb51-6"><a href="como-trabalhar-no-r.html#cb51-6" tabindex="-1"></a><span class="co">#Renomeando variaveis ----</span></span>
<span id="cb51-7"><a href="como-trabalhar-no-r.html#cb51-7" tabindex="-1"></a><span class="co">#Vamos renomear de forma a tirar espacos e manter apenas letras minusculas.</span></span>
<span id="cb51-8"><a href="como-trabalhar-no-r.html#cb51-8" tabindex="-1"></a>dados_renamed <span class="ot">&lt;-</span> <span class="fu">rename</span>(dados,           </span>
<span id="cb51-9"><a href="como-trabalhar-no-r.html#cb51-9" tabindex="-1"></a>                        <span class="at">id =</span> ID,  <span class="co">#nomes das variaveis (nome novo = nome antigo)</span></span>
<span id="cb51-10"><a href="como-trabalhar-no-r.html#cb51-10" tabindex="-1"></a>                        <span class="at">peso_g  =</span> <span class="st">`</span><span class="at">Peso (g)</span><span class="st">`</span>,</span>
<span id="cb51-11"><a href="como-trabalhar-no-r.html#cb51-11" tabindex="-1"></a>                        <span class="at">total_parasitas =</span> <span class="st">`</span><span class="at">Total de parasitas</span><span class="st">`</span>,</span>
<span id="cb51-12"><a href="como-trabalhar-no-r.html#cb51-12" tabindex="-1"></a>                        <span class="at">local  =</span> Local</span>
<span id="cb51-13"><a href="como-trabalhar-no-r.html#cb51-13" tabindex="-1"></a>                        )</span>
<span id="cb51-14"><a href="como-trabalhar-no-r.html#cb51-14" tabindex="-1"></a><span class="fu">colnames</span>(dados_renamed)</span></code></pre></div>
<p>Note que quando existe espaço, o nome da variável precisa estar entre crases.
Agora vamos dizer para o R os tipos de nossas variáveis. Um problema muito comum é o R não reconhecer que a variável categórica não possui fatores, mesmo possuindo. Por exemplo, em “iris”, temos a variável categórica ‘Species’ com seus fatores (setosa, versicolor, virginica). É possível que no seu banco de dados, o R não reconheça isso, então vamos utilizar a função <em>levels()</em> para verificar se o R entendeu quais são os fatores. Se o R retornar NULL, você precisa dizer para o R utilizando a função <em>as.factor()</em>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="como-trabalhar-no-r.html#cb52-1" tabindex="-1"></a></span>
<span id="cb52-2"><a href="como-trabalhar-no-r.html#cb52-2" tabindex="-1"></a><span class="co"># 4. Consertar fatores  --------------------------------------------------------</span></span>
<span id="cb52-3"><a href="como-trabalhar-no-r.html#cb52-3" tabindex="-1"></a><span class="co"># ver quais fatores estao na variavel local</span></span>
<span id="cb52-4"><a href="como-trabalhar-no-r.html#cb52-4" tabindex="-1"></a><span class="fu">levels</span>(dados_renamed<span class="sc">$</span>local) <span class="co">#Se retornar NULL eh porque nao ta reconhecendo como fator.</span></span>
<span id="cb52-5"><a href="como-trabalhar-no-r.html#cb52-5" tabindex="-1"></a></span>
<span id="cb52-6"><a href="como-trabalhar-no-r.html#cb52-6" tabindex="-1"></a><span class="co"># Transformando em fator ----</span></span>
<span id="cb52-7"><a href="como-trabalhar-no-r.html#cb52-7" tabindex="-1"></a>dados_renamed<span class="sc">$</span>local <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(dados_renamed<span class="sc">$</span>local)</span>
<span id="cb52-8"><a href="como-trabalhar-no-r.html#cb52-8" tabindex="-1"></a></span>
<span id="cb52-9"><a href="como-trabalhar-no-r.html#cb52-9" tabindex="-1"></a><span class="co"># checar fatores</span></span>
<span id="cb52-10"><a href="como-trabalhar-no-r.html#cb52-10" tabindex="-1"></a><span class="fu">levels</span>(dados_renamed<span class="sc">$</span>local)</span></code></pre></div>
<p>Agora podemos renomear o nome dos fatores de uma variável categórica utilizando a função <em>recode_factor()</em>. Nesse processo, podemos identificar erros de digitação que ocorreram durante o planilhamento dos dados. Por exemplo, você pode ter digitado “Macho”, “macho” e “male” na variável sexo durante o planilhamento. O R vai identificar os três como sendo fatores diferentes, mas na verdade são o mesmo fator. Portanto, é necessário que seja padronizado.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="como-trabalhar-no-r.html#cb53-1" tabindex="-1"></a><span class="co"># 4.1 Renomear fatores</span></span>
<span id="cb53-2"><a href="como-trabalhar-no-r.html#cb53-2" tabindex="-1"></a></span>
<span id="cb53-3"><a href="como-trabalhar-no-r.html#cb53-3" tabindex="-1"></a><span class="co">#Checar fatores</span></span>
<span id="cb53-4"><a href="como-trabalhar-no-r.html#cb53-4" tabindex="-1"></a><span class="fu">levels</span>(dados_renamed<span class="sc">$</span>local)</span></code></pre></div>
<p>Veja que aqui deveríamos ter apenas três fatores: floresta, urbano e parque. Mas, devido a erros de digitação, o R entende que são fatores diferentes. Isso é muito comum em planilhas de dados grandes, e você teria que fazer isso manualmente, identificando cada erro. Imagina o trabalhão.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="como-trabalhar-no-r.html#cb54-1" tabindex="-1"></a><span class="co">#Renomear fatores</span></span>
<span id="cb54-2"><a href="como-trabalhar-no-r.html#cb54-2" tabindex="-1"></a>dados_renamed<span class="sc">$</span>local <span class="ot">&lt;-</span> <span class="fu">recode_factor</span>(dados_renamed<span class="sc">$</span>local,   <span class="co">#variavel categorica</span></span>
<span id="cb54-3"><a href="como-trabalhar-no-r.html#cb54-3" tabindex="-1"></a>                                     <span class="at">Floresta =</span> <span class="st">&quot;floresta&quot;</span>,         <span class="co">#mudando nome Floresta para floresta</span></span>
<span id="cb54-4"><a href="como-trabalhar-no-r.html#cb54-4" tabindex="-1"></a>                                     <span class="at">park =</span> <span class="st">&quot;parque&quot;</span>,</span>
<span id="cb54-5"><a href="como-trabalhar-no-r.html#cb54-5" tabindex="-1"></a>                                     <span class="at">parque. =</span> <span class="st">&quot;parque&quot;</span>,</span>
<span id="cb54-6"><a href="como-trabalhar-no-r.html#cb54-6" tabindex="-1"></a>                                     <span class="at">urban =</span> <span class="st">&quot;urbano&quot;</span>,</span>
<span id="cb54-7"><a href="como-trabalhar-no-r.html#cb54-7" tabindex="-1"></a>                                     <span class="at">Urbano =</span> <span class="st">&quot;urbano&quot;</span>)</span>
<span id="cb54-8"><a href="como-trabalhar-no-r.html#cb54-8" tabindex="-1"></a></span>
<span id="cb54-9"><a href="como-trabalhar-no-r.html#cb54-9" tabindex="-1"></a><span class="co">#check factors</span></span>
<span id="cb54-10"><a href="como-trabalhar-no-r.html#cb54-10" tabindex="-1"></a><span class="fu">levels</span>(dados_renamed<span class="sc">$</span>local)</span></code></pre></div>
<p>Agora sim! Temos os três fatores bonitinhos. Agora que limpamos nossos dados brutos, iremos exportar nossa planilha limpa. Perceba que o processo do script é colocar a planilha bruta de um lado e sair limpa e bonitinha do outro. É com os dados processados que iremos trabalhar de fato. Vamos salvar sempre no formato CSV, por ser um formato mais simples, leve e estável.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="como-trabalhar-no-r.html#cb55-1" tabindex="-1"></a><span class="co"># 8. Salvar dado processado ----------------------------------------------------</span></span>
<span id="cb55-2"><a href="como-trabalhar-no-r.html#cb55-2" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="at">x =</span> dados_renamed,    <span class="co">#nome da planilha que voce quer exportar</span></span>
<span id="cb55-3"><a href="como-trabalhar-no-r.html#cb55-3" tabindex="-1"></a>          <span class="at">file =</span> <span class="st">&quot;data/processed/processed_fake_data.csv&quot;</span>, <span class="co">#local e nome da planilha exportada</span></span>
<span id="cb55-4"><a href="como-trabalhar-no-r.html#cb55-4" tabindex="-1"></a>          <span class="at">row.names =</span> <span class="cn">FALSE</span>)  <span class="co">#sempre utilizaremos row.names = FALSE</span></span></code></pre></div>
<p>O processo de manipulação de dados no R é bastante completo, e existem diferentes formas de limpar seus dados brutos. O pacote <strong>dplyr</strong> possui funções capazes de selecionar variáveis, selecionar linhas, criar variáveis, criar subconjuntos, entre outras. Para aprimorar seu script de limpeza de dados, você precisará aprender sobre manipulação de dados e incluir no processo os códigos no seu script. Por sorte, existe muito material disponível na internet sobre o assunto. Talvez algum dia eu crie um material sobre manipulação de dados com dplyr, mas aqui esse não é meu objetivo. Meu objetivo é simplesmente fornecer o esqueleto teórico, dando base para crescer de forma mais direcionada.</p>
<p>Por fim, não esqueça de salvar o script na pasta script com o nome ‘01_clean_raw_data’.</p>
</div>
<div id="etapa-2-fazer-analise" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Etapa 2: fazer analise<a href="como-trabalhar-no-r.html#etapa-2-fazer-analise" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Com a planilha bruta processada, podemos realizar testes estatísticos em um novo script para responder à nossa hipótese. Vamos supor que nossa pergunta seja saber se existe diferença na infestação de parasitas em cada local. Organizaremos o script de análise de forma semelhante ao script de limpeza, ou seja, escreveremos um cabeçalho, carregaremos pacotes, importaremos e analisaremos dados de forma organizada.</p>
<p>Vamos fazer um cabeçalho para nosso script de análise.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="como-trabalhar-no-r.html#cb56-1" tabindex="-1"></a></span>
<span id="cb56-2"><a href="como-trabalhar-no-r.html#cb56-2" tabindex="-1"></a><span class="co"># Script para analisar dados</span></span>
<span id="cb56-3"><a href="como-trabalhar-no-r.html#cb56-3" tabindex="-1"></a><span class="co"># Author: seu nome</span></span>
<span id="cb56-4"><a href="como-trabalhar-no-r.html#cb56-4" tabindex="-1"></a><span class="co"># Data: 2019-11-07</span></span></code></pre></div>
<p>Vamos criar o código para carregar os pacotes que iremos utilizar.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="como-trabalhar-no-r.html#cb57-1" tabindex="-1"></a></span>
<span id="cb57-2"><a href="como-trabalhar-no-r.html#cb57-2" tabindex="-1"></a><span class="co">#Carregar pacotes</span></span>
<span id="cb57-3"><a href="como-trabalhar-no-r.html#cb57-3" tabindex="-1"></a><span class="fu">library</span>(broom)</span></code></pre></div>
<p>Dessa vez, iremos importar a planilha limpa e processada. Note que o caminho de importação é similar ao caminho que exportamos no script de limpeza.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="como-trabalhar-no-r.html#cb58-1" tabindex="-1"></a></span>
<span id="cb58-2"><a href="como-trabalhar-no-r.html#cb58-2" tabindex="-1"></a><span class="co"># Load data ---------------------------------------------------------------</span></span>
<span id="cb58-3"><a href="como-trabalhar-no-r.html#cb58-3" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/processed/processed_iris.csv&quot;</span>)</span></code></pre></div>
<p>Vamos fazer um check basico.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="como-trabalhar-no-r.html#cb59-1" tabindex="-1"></a></span>
<span id="cb59-2"><a href="como-trabalhar-no-r.html#cb59-2" tabindex="-1"></a><span class="co"># 1. Check up basico --------------------------------------------------------------</span></span>
<span id="cb59-3"><a href="como-trabalhar-no-r.html#cb59-3" tabindex="-1"></a><span class="fu">head</span>(dados)</span>
<span id="cb59-4"><a href="como-trabalhar-no-r.html#cb59-4" tabindex="-1"></a><span class="fu">str</span>(dados)</span>
<span id="cb59-5"><a href="como-trabalhar-no-r.html#cb59-5" tabindex="-1"></a><span class="fu">leves</span>(dados<span class="sc">$</span>local)</span></code></pre></div>
<p>Vamos realizar uma análise para ver se existe diferença na quantidade de parasitas encontrada nos bem-te-vis de cada local. Para isso, iremos utilizar o teste não paramétrico de Kruskal-Wallis através da função kruskal.test(). Nessa função, você precisa dizer qual sua variável numérica de interesse em relação a (~) sua variável categórica e seus grupos (fatores). Veja que o p-value é menor que 0.05, então dizemos que existe diferença da largura entre as três espécies.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="como-trabalhar-no-r.html#cb60-1" tabindex="-1"></a></span>
<span id="cb60-2"><a href="como-trabalhar-no-r.html#cb60-2" tabindex="-1"></a><span class="co">#realizando o teste</span></span>
<span id="cb60-3"><a href="como-trabalhar-no-r.html#cb60-3" tabindex="-1"></a>kw <span class="ot">&lt;-</span> <span class="fu">kruskal.test</span>(dados<span class="sc">$</span>total_parasitas <span class="sc">~</span> dados<span class="sc">$</span>local)</span>
<span id="cb60-4"><a href="como-trabalhar-no-r.html#cb60-4" tabindex="-1"></a>kw</span></code></pre></div>
<p>Vamos salvar o resultado em uma tabela organizada (tidy) utilizando a função <em>tidy()</em> do pacote <strong>broom</strong>.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="como-trabalhar-no-r.html#cb61-1" tabindex="-1"></a></span>
<span id="cb61-2"><a href="como-trabalhar-no-r.html#cb61-2" tabindex="-1"></a><span class="co">#Convertendo tabela para formato tidy</span></span>
<span id="cb61-3"><a href="como-trabalhar-no-r.html#cb61-3" tabindex="-1"></a>table_kw <span class="ot">&lt;-</span> <span class="fu">tidy</span>(kw_test)</span>
<span id="cb61-4"><a href="como-trabalhar-no-r.html#cb61-4" tabindex="-1"></a>table_kw</span></code></pre></div>
<p>Agora salvaremos essa tabela na nossa pasta outputs em tables.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="como-trabalhar-no-r.html#cb62-1" tabindex="-1"></a></span>
<span id="cb62-2"><a href="como-trabalhar-no-r.html#cb62-2" tabindex="-1"></a><span class="co">#Exportando resultado</span></span>
<span id="cb62-3"><a href="como-trabalhar-no-r.html#cb62-3" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="at">x =</span> table_kw,                                 </span>
<span id="cb62-4"><a href="como-trabalhar-no-r.html#cb62-4" tabindex="-1"></a>          <span class="at">file =</span> <span class="st">&quot;outputs/tables/resultado_kw.csv&quot;</span>,</span>
<span id="cb62-5"><a href="como-trabalhar-no-r.html#cb62-5" tabindex="-1"></a>          <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Maravilha! Já temos nosso segundo script pronto. Agora é só salvá-lo na pasta script com o nome ‘02_kruskal_test’.</p>
</div>
<div id="etapa-3-criar-grafico" class="section level3 hasAnchor" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Etapa 3: criar grafico<a href="como-trabalhar-no-r.html#etapa-3-criar-grafico" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Agora vamos criar o gráfico para representar nosso resultado de que existe diferença na largura das pétalas entre as espécies de iris.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="como-trabalhar-no-r.html#cb63-1" tabindex="-1"></a> </span>
<span id="cb63-2"><a href="como-trabalhar-no-r.html#cb63-2" tabindex="-1"></a><span class="co"># Script para criar graficos</span></span>
<span id="cb63-3"><a href="como-trabalhar-no-r.html#cb63-3" tabindex="-1"></a><span class="co"># Author: seu nome</span></span>
<span id="cb63-4"><a href="como-trabalhar-no-r.html#cb63-4" tabindex="-1"></a><span class="co"># Data: 2019-11-07</span></span>
<span id="cb63-5"><a href="como-trabalhar-no-r.html#cb63-5" tabindex="-1"></a> </span>
<span id="cb63-6"><a href="como-trabalhar-no-r.html#cb63-6" tabindex="-1"></a><span class="co">#Carregar pacotes</span></span>
<span id="cb63-7"><a href="como-trabalhar-no-r.html#cb63-7" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb63-8"><a href="como-trabalhar-no-r.html#cb63-8" tabindex="-1"></a></span>
<span id="cb63-9"><a href="como-trabalhar-no-r.html#cb63-9" tabindex="-1"></a><span class="co"># Load data ---------------------------------------------------------------</span></span>
<span id="cb63-10"><a href="como-trabalhar-no-r.html#cb63-10" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/processed/processed_fake_data.csv&quot;</span>)</span>
<span id="cb63-11"><a href="como-trabalhar-no-r.html#cb63-11" tabindex="-1"></a></span>
<span id="cb63-12"><a href="como-trabalhar-no-r.html#cb63-12" tabindex="-1"></a><span class="co"># 1. Basic checks --------------------------------------------------------------</span></span>
<span id="cb63-13"><a href="como-trabalhar-no-r.html#cb63-13" tabindex="-1"></a><span class="fu">head</span>(dados)</span>
<span id="cb63-14"><a href="como-trabalhar-no-r.html#cb63-14" tabindex="-1"></a><span class="fu">str</span>(dados)</span>
<span id="cb63-15"><a href="como-trabalhar-no-r.html#cb63-15" tabindex="-1"></a><span class="fu">leves</span>(dados<span class="sc">$</span>species)</span>
<span id="cb63-16"><a href="como-trabalhar-no-r.html#cb63-16" tabindex="-1"></a></span>
<span id="cb63-17"><a href="como-trabalhar-no-r.html#cb63-17" tabindex="-1"></a><span class="co"># 2. Criar grafico boxplot -----------------------------------------------------</span></span>
<span id="cb63-18"><a href="como-trabalhar-no-r.html#cb63-18" tabindex="-1"></a></span>
<span id="cb63-19"><a href="como-trabalhar-no-r.html#cb63-19" tabindex="-1"></a>grafico <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> petal_width))<span class="sc">+</span></span>
<span id="cb63-20"><a href="como-trabalhar-no-r.html#cb63-20" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb63-21"><a href="como-trabalhar-no-r.html#cb63-21" tabindex="-1"></a></span>
<span id="cb63-22"><a href="como-trabalhar-no-r.html#cb63-22" tabindex="-1"></a>grafico</span>
<span id="cb63-23"><a href="como-trabalhar-no-r.html#cb63-23" tabindex="-1"></a></span>
<span id="cb63-24"><a href="como-trabalhar-no-r.html#cb63-24" tabindex="-1"></a><span class="co"># 3. Salvando grafico ----------------------------------------------------------</span></span>
<span id="cb63-25"><a href="como-trabalhar-no-r.html#cb63-25" tabindex="-1"></a></span>
<span id="cb63-26"><a href="como-trabalhar-no-r.html#cb63-26" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">plot =</span> grafico,    <span class="co">#nome do grafico</span></span>
<span id="cb63-27"><a href="como-trabalhar-no-r.html#cb63-27" tabindex="-1"></a>       <span class="at">filename =</span> <span class="st">&quot;output/figures/Grafico_boxplot.png&quot;</span>, <span class="co">#nome do grafico exportado</span></span>
<span id="cb63-28"><a href="como-trabalhar-no-r.html#cb63-28" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>,                             <span class="co">#largura do grafico</span></span>
<span id="cb63-29"><a href="como-trabalhar-no-r.html#cb63-29" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">10</span>,                            <span class="co">#Altura do grafico</span></span>
<span id="cb63-30"><a href="como-trabalhar-no-r.html#cb63-30" tabindex="-1"></a>       <span class="at">dpi =</span> <span class="dv">300</span>)                              <span class="co">#resolucao do grafico</span></span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:graph"></span>
<img src="_main_files/figure-html/graph-1.png" alt="ggplot2" width="672" />
<p class="caption">
Figure 4.1: ggplot2
</p>
</div>
<p>Você acabou de criar um gráfico utilizando o pacote ggplot2, que é o pacote mais utilizado para produção de gráficos no R. O código pode parecer um pouco confuso no início, mas não precisa estudar muito para perceber que ele é muito simples e intuitivo. Para aprender mais sobre gráficos, sugiro os livros: <a href="https://rkabacoff.github.io/datavis/">Data Visualization: A practical introduction</a> e <a href="https://r-graphics.org/">R Graphics Cookbook</a>.</p>
<p>Não esqueça de salvar o script com o nome ‘03_grafico’.</p>
</div>
<div id="etapa-4-replicabilidade" class="section level3 hasAnchor" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Etapa 4: Replicabilidade<a href="como-trabalhar-no-r.html#etapa-4-replicabilidade" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>O seu projeto está organizado de forma que se torna fácil a replicabilidade em qualquer computador, gerando todos seus outputs (tabelas e figuras) automaticamente! Para isso, você precisa manter e <strong>JAMAIS deletar</strong> ou modificar seus dados brutos (pasta raw). Todos os demais arquivos podem ser produzidos com um clique a partir dos seus dados brutos, portanto, podem ser deletados. Isso se torna útil ao compartilhar seus dados com alguém, em que você pode zipar todo seu projeto, enviar para um contribuidor, e ele poderá ter acesso a tudo rodando apenas um script. É esse script que iremos fazer agora.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="como-trabalhar-no-r.html#cb64-1" tabindex="-1"></a><span class="co"># Script to run all project code</span></span>
<span id="cb64-2"><a href="como-trabalhar-no-r.html#cb64-2" tabindex="-1"></a><span class="co"># Importante: reinicie o R antes de rodar esse script session &gt; restart R</span></span>
<span id="cb64-3"><a href="como-trabalhar-no-r.html#cb64-3" tabindex="-1"></a></span>
<span id="cb64-4"><a href="como-trabalhar-no-r.html#cb64-4" tabindex="-1"></a><span class="co"># Start----</span></span>
<span id="cb64-5"><a href="como-trabalhar-no-r.html#cb64-5" tabindex="-1"></a><span class="co"># 1. Run all scripts again on a fresh R section---------------------------------</span></span>
<span id="cb64-6"><a href="como-trabalhar-no-r.html#cb64-6" tabindex="-1"></a><span class="co"># 1.1 Load and clean data----</span></span>
<span id="cb64-7"><a href="como-trabalhar-no-r.html#cb64-7" tabindex="-1"></a><span class="fu">source</span>(<span class="at">file =</span> <span class="st">&quot;script/01_clean_raw_data.R&quot;</span>)</span>
<span id="cb64-8"><a href="como-trabalhar-no-r.html#cb64-8" tabindex="-1"></a></span>
<span id="cb64-9"><a href="como-trabalhar-no-r.html#cb64-9" tabindex="-1"></a><span class="co"># 1.2 Run analysis -------------------------------------------------------------</span></span>
<span id="cb64-10"><a href="como-trabalhar-no-r.html#cb64-10" tabindex="-1"></a><span class="fu">source</span>(<span class="at">file =</span> <span class="st">&quot;script/02_kruskal_test.R&quot;</span>)</span>
<span id="cb64-11"><a href="como-trabalhar-no-r.html#cb64-11" tabindex="-1"></a></span>
<span id="cb64-12"><a href="como-trabalhar-no-r.html#cb64-12" tabindex="-1"></a><span class="co"># 1.3 Plot figures--------------------------------------------------------------</span></span>
<span id="cb64-13"><a href="como-trabalhar-no-r.html#cb64-13" tabindex="-1"></a><span class="fu">source</span>(<span class="at">file =</span> <span class="st">&quot;script/03_grafico.R&quot;</span>)</span></code></pre></div>
<p>Ao rodar este código, todos os seus scripts são executados, e todos os seus outputs e planilhas processadas são gerados. Mas lembre-se, seu dado bruto contido na pasta data/raw não pode ser deletado ou modificado.</p>
<p>Salve este script com o nome “run_project”.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-para-iniciantes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="git-e-github.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-parts.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
